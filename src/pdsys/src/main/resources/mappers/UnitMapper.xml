<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.zworks.pdsys.mappers.UnitMapper">
	<resultMap id="unitResultMap" type="unitModel" >
        <id column="c_id" property="id"/> 
        <result column="c_name" property="name"/>
    </resultMap>
	
	<select id="queryList" resultMap="unitResultMap">
		select 
			c_id,
			c_name
		from unit_tbl
		<where>
			<if test="id > 0">
				and c_id = #{id} 
		    </if>
			<if test="name != null">
				and c_name = #{name} 
		    </if>
		</where>
	</select>
	
	<insert id="add" parameterType="unitModel" useGeneratedKeys="true" keyProperty="id">
		insert into unit_tbl
		(
			c_name
		)
		values
		(
			#{name}
		)
		<selectKey keyProperty="id" order="AFTER" resultType="java.lang.Integer">
      		select LAST_INSERT_ID() as id
      	</selectKey>
	</insert>
</mapper>