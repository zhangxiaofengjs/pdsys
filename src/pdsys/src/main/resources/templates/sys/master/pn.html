<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:include="common/header::header">
</head>
<body>
<div th:fragment="content(${list})">
	<script th:src="@{/js/sys/master/pn.js}"></script> 
	<script th:src="@{/js/sys/master/unit.js}"></script> 
	<nav style="border-radius:0px;margin-bottom:-1px;" class="navbar navbar-default">
		<div class="container-fluid">
	  		<div class="navbar-header">
	  			<span class="navbar-brand glyphicon glyphicon-filter" aria-hidden="true"></span>
	  		</div>
	 		<form class="navbar-form navbar-left" style="padding-left:0px;" role="form" th:action="@{/sys/master/main/pn}" method="post">
	 			<button type="submit" class="btn btn-sm btn-info">查询</button>
	 			<button type="button" class="btn btn-sm btn-info" id='addPn'>添加品番</button>
	 			<button type="button" class="btn btn-sm btn-info" id='editPn'>修改品番</button>
	 			<button type="button" class="btn btn-sm btn-info" id='addPnCls'>添加子类</button>
	 			<button type="button" class="btn btn-sm btn-info" id='addBOM0'>添加 / 修改原材</button>
	 			<button type="button" class="btn btn-sm btn-info" id='addBOM1'>添加 / 修改包材</button>
			</form>
		</div>
	</nav>

	<table class="table table-striped table-bordered table-hover table-condensed" contenteditable="false">
		<thead>
		    <tr>
		    	<th style="width:20px;"><input type="checkbox" name="selectAll"></th>
				<th>品番</th>
				<th>名称</th>
				<th>子类</th>
				<th>单位</th>
				<th>使用原材</th>
				<th>使用包材</th>
		    </tr>
		</thead>
		<tbody>
			<tr th:each="pn : ${list}"
				th:with="bomRels=${pn.bomRels}"
				th:rowid="${pn.id}">
				<td>
					<input type="checkbox" name="select" th:rowid="${pn.id}">
				</td>
				<td th:text="${pn.pn}"></td>
				<td th:text="${pn.name}"></td>
				<td>
					<span th:each="pnCls,iterStat: ${pn.pnClss}">
						<span th:text="'●'  + ${pnCls.name}"></span><br/>
					</span>
				</td>
				<td th:text="${pn.unit.name}"></td>
				<td>
					<span th:each="bomRel,iterStat: ${bomRels}"
						  th:with="bom=${bomRel.bom},
						  		   index=1">
						<span th:if="${bom.type} == 0" th:text="'●' + ${bomRel.bom.name} + ' 品番单位消耗:' + ${bomRel.useNum} + ${bom.unit.name}"></span>
						<br th:if="${bom.type} == 0"/>
					</span>
				</td>
				<td>
					<span th:each="bomRel,iterStat: ${bomRels}"
						  th:with="bom=${bomRel.bom}">
						<span th:if="${bom.type} == 1" th:text="'●' + ${bomRel.bom.name} + ' 品番单位消耗:' + ${bomRel.useNum} + ${bom.unit.name}"></span>
						<br th:if="${bom.type} == 1"/>
					</span>
				</td>
		    </tr>
		</tbody>
	</table>
	<div id="dlg_div"></div>
	<div id="unit_dlg_div"></div>
	<div id="pncls_dlg_div"></div>
	<div id="msg_div"></div>
</div>
</body>
</html>