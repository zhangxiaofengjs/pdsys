<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta th:include="common/header::header">
</head>
<body>
	<div id="rrapp">
		<div>
			<nav style="border-radius:0px;margin-bottom:10px;" class="navbar navbar-default">
				<div class="container-fluid">
			  		<div class="navbar-header">
			  			<span class="navbar-brand glyphicon glyphicon-menu-hamburger" aria-hidden="true"></span>
			  		</div>
			 		<form class="navbar-form navbar-left" style="padding-left:0px;" role="form" method="post">
			 			<div class="form-group">
						   <input type="text" class="form-control" placeholder="原包材">
			 			</div>
			 			<button type="button" class="btn btn-sm btn-info" id="reback">返回</button>
			 			<button type="submit" class="btn btn-sm btn-info" name="refresh">查询</button>
			 			<button type="button" class="btn btn-sm btn-info" id="upPurchaseDetail">修改</button>
			 			<button type="button" class="btn btn-sm btn-info" id="delPurchaseDetail">删除</button>
			 			<button type="button" class="btn btn-sm btn-info" id="placePurchase">下单</button>
					</form>
				</div>
			</nav>
			<input type="hidden" id="purchase_id" th:value="${p.id}">
			<input type="hidden" id="isEdit">
			<table class="table table-striped table-bordered table-hover table-condensed">
				<thead>
					<tr>
						<th style="text-align:center;" th:colspan="5">
							<h4><b>采购单明细表</b></h4>
						</th>
					</tr>
					<tr>
					    <th style="width:20px;"><input type="checkbox" name="selectAll" /></th>
						<th>原包材</th>
						<th>数量</th>
						<th>单价</th>
						<th>供应商</th>
					</tr>
				</thead>
				<tbody>
				    <tr th:each="purchaseBom : ${purchaseBoms}">
				      <td><input type="checkbox" name="select" th:rowid="${purchaseBom.id}"/></td>
				      <td th:text="${purchaseBom.bom.pn} +' '+${purchaseBom.bom.name}"></td>
				      <td th:text="${purchaseBom.num}"></td>
				      <td th:text="${purchaseBom.price}"></td>
				      <td>
						<i th:if="${#lists.isEmpty(purchaseBom.bom.suppliers)}" th:text="未设定"></i>
						<span th:each="supplier, iterStat : ${purchaseBom.bom.suppliers}" th:text="(${iterStat.index} != 0 ? ',' : '') + ${supplier.name}">
						</span>
					 </td>
				    </tr>
				</tbody>
			</table>
   	 	</div>
   	 	<div th:replace="common/footer::copyright"></div>
   	 	<div id="addPurchase_div"></div>
   	 	<div id="upPurchase_div"></div>
   	 	<div id="msg_div"></div>
	</div>
	
	<script th:src="@{/js/common/table.js}"></script> 
	<script th:src="@{/js/common/dlg.js}"></script> 
	<script th:src="@{/js/common/date.js}"></script> 
	<script th:src="@{/js/purchase/purchaseDetail.js}"></script> 
</body>
</html>
